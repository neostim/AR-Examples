<!DOCTYPE html>
<html>
   <head>
      <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
      <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
      <script>
         AFRAME.registerComponent('modelhandler', {
            init: function() {
               this.marker = document.querySelector('#hiro-marker');
               this.el.sceneEl.addEventListener('markerFound', () => {
                  this.marker.object3D.updateMatrixWorld();
                  this.el.object3D.position.setFromMatrixPosition(this.marker.object3D.matrixWorld);
                  this.el.object3D.quaternion.setFromRotationMatrix(this.marker.object3D.matrixWorld);
                  this.el.object3D.visible = true;
               });
               this.el.sceneEl.addEventListener('markerLost', () => {
                  this.el.object3D.visible = false;
               });
            }
         });
      </script>
   </head>
   <body>
      <a-scene embedded arjs>
         <a-marker preset="hiro" id="hiro-marker"></a-marker>
         <a-entity gltf-model="models/assembly.gltf" scale="1 1 1" position="0 0 0" rotation="0 180 0" modelhandler></a-entity>
         <a-entity camera></a-entity>
      </a-scene>
   </body>
</html>

